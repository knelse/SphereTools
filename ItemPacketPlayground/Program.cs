using static ObjectPacketTools;

Console.WindowWidth = 600;
//27/08/2022 16:46:58			27/08/2022 16:49:18			38002C0100503A9FBF5C466102000A820050A30C300000005010848086650008000080822008F028032C000000140461E061198019000000
//27/08/2022 16:47:01			B0002C0100543A35CAA08F0F80842E090000000000000000409145E644121560E0F317A0C0020100BF8665B2C407404297040000000000000000A0C8225377880A30F0F90B50C80280FFFFFFFF020B0400FC7894C1171F00095D12000000000000000080228B4CEF072AC0C0E72F40210B00FEFFFFFF0BEFA076F7459616D62697E676062303F07B58064B7C002474490000000000000000008A2C322F87A800039FBF00852C00F8FFFFFF2FB0400000

// using var db = new LiteDatabase(@"Filename=C:\_sphereStuff\sph_items.db;Connection=shared;");
// var itemCollection = db.GetCollection<ObjectPacket>("ObjectPackets");
RegisterBsonMapperForBit();

var fromCode = true;

if (fromCode)
{
    // ma missing
    var container = Convert.FromHexString(
        "2C0C10802F811F010BE2E00320A14B02000000000000000050649101A000039AFE00850900F8F9AF00063E00C044620050C62200C0762200441619000A2F809DF50B60E1337CA2838DC436A88C45F0FBF144C1882C3200145E4020A0F00CA2838DC436A88C45F0FBF144856FD0ED2CFE558F4806568F480606F8212C400D3E9F1045629756C62241A476A2E550140014433A29DE0785170000F8252CA01F3E19A14662B053C62249C2762280441619890A5900F0FFFFFF0F150B2483CF38A391B89495B1C813319E680C140500C550EA8000C0CF62813FF001CD2512ABA232160995CB130124B2C80050C80280FFFFFFFFC2132C1C0004FC0C5800161F00095D12000000000000000080228B0C000518D0F407286401C0FFFFFFFFEF7F85CFF001002612038032160100B6130120B2C8005078810081C233646DCF15EB822612257CD01517BE01000000000000000000000000A0F00C19D976C5DBB489440D7E72C5856F0000000000000000000000000000FF2B7C46E11908C0E68AF5411389FE18E28A0BDF00000000000000000000000000F00360E1337C008089C400A08C450080ED4400882C3200145E4040A0F00C737F75C514A18944208271C5856F00000000000000000000000000F8E53EF0193E00C044620050C62200C0762200441619000A2F30205078069906BAE283DA44A22BC1B9E2C23700000000000000000000000000FC741FF8019FB95C2231DE2A6311FBDE3C1100228B0C003F061690C027C396489CBFC958E4DBD74E0480C82203000C2C2041E10502007E022C2081CF1B9A91D8F292B1080EB09D080091450680C20B0800FC065840029F58C72331AE2863911E863B1100228B0C0085171800F8093F80043E1FD34662154FC622EEA8782200441619000A2F4000F02B5300097CE8AF8BC446968C45D242F14400882C3200145EA000E0A7BF0212F838E512899941198B744FE689001059640028BCC001C06F7F0524F079E92512B36132164182C6130120B2C80050780103809FDE02AEE10320A14B02000000000000000050649101007A0BB846010634FD010A131050C80280FFFFFF7F");
           // "23D8DC8B0FF0BA2D09406B1D1980A7F418407145A61C168D60732F0518600107286401C0FFFFFF7FC103027E51D8DC8B0F88142D09D0471F1980D4E918589145261C16156080051C0051D8DC4B210B00FEFFFFFF7F");

    var objects = GetObjectsFromPacket(container);

    Console.WriteLine(GetTextOutput(objects, true));
    
    // objects.ForEach(x => itemCollection.Insert(x));
}

else
{
    while (true)
    {
        var container = Convert.FromHexString(Console.ReadLine());
        var objects = GetObjectsFromPacket(container);

        Console.WriteLine(GetTextOutput(objects, true));
    }
}

